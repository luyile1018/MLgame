<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>MLæ¸¸æˆï¼šæ¨¡å‹æŠ¢æ•‘è®¡åˆ’</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #050505;
            color: #00ff00;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        
        /* é¡¶éƒ¨çŠ¶æ€æ  */
        .hud {
            width: 80%;
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 20, 0, 0.8);
            border: 1px solid #00ff00;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.2);
            z-index: 10;
        }
        .stat-box { font-size: 1.2rem; }
        .danger { color: #ff3333; animation: blink 1s infinite; }
        
        /* æ¸¸æˆä¸»åŒºåŸŸ */
        #networkCanvas {
            border: 1px solid #333;
            background: radial-gradient(circle, #111 0%, #000 100%);
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.05);
        }

        /* æŒ‰é’® */
        #fixBtn {
            margin-top: 20px;
            padding: 15px 40px;
            font-size: 20px;
            background-color: #003300;
            color: #00ff00;
            border: 2px solid #00ff00;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
        }
        #fixBtn:hover { background-color: #00ff00; color: #000; box-shadow: 0 0 20px #00ff00; }
        #fixBtn:disabled { border-color: #555; color: #555; background: #111; cursor: not-allowed; }

        /* é—®ç­”å¼¹çª— */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        .modal {
            background: #111;
            border: 2px solid #00ff00;
            padding: 30px;
            width: 500px;
            border-radius: 10px;
            box-shadow: 0 0 50px rgba(0, 255, 0, 0.3);
            text-align: center;
        }
        .question-text { font-size: 1.4rem; margin-bottom: 25px; color: #fff; }
        .options { display: flex; flex-direction: column; gap: 10px; }
        .option-btn {
            padding: 12px;
            background: #002200;
            border: 1px solid #005500;
            color: #ccc;
            cursor: pointer;
            font-size: 1rem;
            text-align: left;
            transition: 0.2s;
        }
        .option-btn:hover { background: #004400; border-color: #00ff00; color: #fff; }

        /* åŠ¨ç”»å…³é”®å¸§ */
        @keyframes blink { 50% { opacity: 0.5; } }
        
        /* ç»“æŸç”»é¢ */
        #gameOverScreen {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: black; flex-direction: column; justify-content: center; align-items: center; z-index: 200;
        }
        h1 { font-size: 3rem; margin: 0; }
    </style>
</head>
<body>

    <div class="hud">
        <div class="stat-box">æ¨¡å‹å‡†ç¡®ç‡: <span id="accuracyDisplay">95.0</span>%</div>
        <div class="stat-box">å·²ä¿®å¤æ¬¡æ•°: <span id="scoreDisplay">0</span></div>
        <div class="stat-box">çŠ¶æ€: <span id="statusText">è¿è¡Œå¹³ç¨³</span></div>
    </div>

    <canvas id="networkCanvas" width="800" height="400"></canvas>

    <button id="fixBtn" onclick="openQuestion()">ğŸ› ï¸ ä»‹å…¥å¾®è°ƒ (Fix Model)</button>

    <div class="modal-overlay" id="quizModal">
        <div class="modal">
            <h3 style="color:#00ff00; margin-top:0;">/// ç³»ç»Ÿè­¦æŠ¥ï¼šè¯·é€‰æ‹©æ­£ç¡®ç­–ç•¥ ///</h3>
            <div class="question-text" id="qText">Question goes here...</div>
            <div class="options" id="qOptions">
                </div>
        </div>
    </div>

    <div id="gameOverScreen">
        <h1 style="color: #ff3333;">SYSTEM FAILURE</h1>
        <p style="color: #fff; font-size: 1.5rem; margin-top: 20px;">æ¨¡å‹å´©æºƒï¼Œå…¬å¸ç ´äº§ã€‚</p>
        <p style="color: #888;">æœ€ç»ˆå¾—åˆ†: <span id="finalScore">0</span></p>
        <button id="fixBtn" onclick="location.reload()" style="margin-top:30px;">é‡å¯ç³»ç»Ÿ</button>
    </div>

<script>
    // --- 1. é¢˜åº“ (ç»“åˆæœºå™¨å­¦ä¹ ä¸ç®€å•è¥é”€æ¦‚å¿µ) ---
    const questions = [
        {
            q: "ä½ æƒ³è®­ç»ƒä¸€ä¸ªæ¨¡å‹æ¥åŒºåˆ†'çŒ«'å’Œ'ç‹—'ï¼Œä½ éœ€è¦ç»™å›¾ç‰‡æ‰“ä¸Šæ ‡ç­¾ã€‚è¿™ç§å­¦ä¹ æ–¹å¼å«ä»€ä¹ˆï¼Ÿ",
            options: ["A. æ— ç›‘ç£å­¦ä¹  (Unsupervised)", "B. ç›‘ç£å­¦ä¹  (Supervised)", "C. å¼ºåŒ–å­¦ä¹  (Reinforcement)"],
            ans: 1 // B
        },
        {
            q: "ä½ çš„æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°å®Œç¾(100%)ï¼Œä½†åœ¨æ–°æ•°æ®ä¸Šè¡¨ç°å¾ˆå·®ã€‚è¿™å«ä»€ä¹ˆï¼Ÿ",
            options: ["A. æ¬ æ‹Ÿåˆ (Underfitting)", "B. è¿‡æ‹Ÿåˆ (Overfitting)", "C. æœ€ä¼˜è§£ (Optimal)"],
            ans: 1 // B
        },
        {
            q: "ä½œä¸ºè¥é”€äººå‘˜ï¼Œä½ æƒ³æ ¹æ®ç”¨æˆ·çš„è´­ä¹°å†å²æŠŠä»–ä»¬åˆ†æˆä¸åŒçš„'ç¾¤ä½“'ï¼Œä½†ä¸çŸ¥é“å…·ä½“æœ‰å“ªäº›ç¾¤ä½“ã€‚åº”è¯¥ç”¨ï¼Ÿ",
            options: ["A. èšç±» (Clustering/æ— ç›‘ç£)", "B. åˆ†ç±» (Classification/ç›‘ç£)", "C. å›å½’ (Regression)"],
            ans: 0 // A
        },
        {
            q: "æˆ¿ä»·é¢„æµ‹ï¼šé€šè¿‡æˆ¿å±‹é¢ç§¯é¢„æµ‹å…·ä½“çš„æˆ¿ä»·é‡‘é¢ã€‚è¿™æ˜¯ä¸€ä¸ªä»€ä¹ˆé—®é¢˜ï¼Ÿ",
            options: ["A. åˆ†ç±»é—®é¢˜ (æ˜¯/å¦)", "B. å›å½’é—®é¢˜ (æ•°å€¼)", "C. èšç±»é—®é¢˜"],
            ans: 1 // B
        },
        {
            q: "ç¥ç»ç½‘ç»œä¸­ï¼Œæ¨¡æ‹Ÿäººè„‘ç¥ç»å…ƒå¹¶å†³å®šæ˜¯å¦å‘ä¸‹ä¼ é€’ä¿¡å·çš„æ•°å­¦å‡½æ•°å«ä»€ä¹ˆï¼Ÿ",
            options: ["A. æ¿€æ´»å‡½æ•° (Activation Function)", "B. æŸå¤±å‡½æ•° (Loss Function)", "C. ä¼˜åŒ–å™¨ (Optimizer)"],
            ans: 0 // A
        },
        {
            q: "ä½ æƒ³è®©AIæ ¹æ®ç”¨æˆ·çš„ç‚¹å‡»è¡Œä¸ºæ¨èå•†å“ï¼Œå¦‚æœç”¨æˆ·ç‚¹å‡»äº†æ¨èå•†å“ï¼ŒAIè·å¾—+1åˆ†ã€‚è¿™æ˜¯ï¼Ÿ",
            options: ["A. ç›‘ç£å­¦ä¹ ", "B. å¼ºåŒ–å­¦ä¹  (Reinforcement Learning)", "C. æ·±åº¦å­¦ä¹ "],
            ans: 1 // B
        },
        {
            q: "ä¸ºäº†é˜²æ­¢æ¨¡å‹'æ­»è®°ç¡¬èƒŒ' (è¿‡æ‹Ÿåˆ)ï¼Œä½ å¯ä»¥åšä»€ä¹ˆï¼Ÿ",
            options: ["A. å¢åŠ æ›´å¤šå¤æ‚çš„å‚æ•°", "B. å‡å°‘è®­ç»ƒæ•°æ®", "C. æ•°æ®å¢å¼º (Data Augmentation) æˆ– æ­£åˆ™åŒ–"],
            ans: 2 // C
        },
        {
            q: "åœ¨è®­ç»ƒç¥ç»ç½‘ç»œæ—¶ï¼Œç”¨æ¥è¡¡é‡æ¨¡å‹é¢„æµ‹å€¼ä¸çœŸå®å€¼å·®è·çš„æ˜¯ï¼Ÿ",
            options: ["A. å‡†ç¡®ç‡ (Accuracy)", "B. æƒé‡ (Weight)", "C. æŸå¤±/ä»£ä»· (Loss/Cost)"],
            ans: 2 // C
        }
    ];

    // --- 2. æ¸¸æˆæ ¸å¿ƒå˜é‡ ---
    let accuracy = 95.0;
    let score = 0;
    let decayRate = 0.05; // åˆå§‹è¡°å‡é€Ÿåº¦
    let isGameActive = true;
    let isPaused = false;
    
    // UI å…ƒç´ 
    const accDisplay = document.getElementById('accuracyDisplay');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const statusText = document.getElementById('statusText');
    const modal = document.getElementById('quizModal');
    const qText = document.getElementById('qText');
    const qOptions = document.getElementById('qOptions');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const finalScore = document.getElementById('finalScore');

    // --- 3. è§†è§‰æ•ˆæœ (Canvas ç¥ç»ç½‘ç»œ) ---
    const canvas = document.getElementById('networkCanvas');
    const ctx = canvas.getContext('2d');
    
    // ç”Ÿæˆç®€å•çš„ç½‘ç»œç»“æ„èŠ‚ç‚¹
    const layers = [3, 5, 5, 2]; // è¾“å…¥å±‚3ä¸ªï¼Œéšè—å±‚5ä¸ªï¼Œè¾“å‡ºå±‚2ä¸ª
    let nodes = [];
    let connections = [];

    function initNetwork() {
        nodes = [];
        connections = [];
        const layerGap = canvas.width / (layers.length + 1);
        
        layers.forEach((nodeCount, layerIndex) => {
            const x = (layerIndex + 1) * layerGap;
            const yGap = canvas.height / (nodeCount + 1);
            for(let i=0; i<nodeCount; i++) {
                nodes.push({
                    x: x,
                    y: (i + 1) * yGap,
                    layer: layerIndex,
                    active: Math.random() // ç”¨äºé—ªçƒåŠ¨ç”»
                });
            }
        });

        // å»ºç«‹è¿çº¿
        for(let i=0; i<nodes.length; i++) {
            for(let j=0; j<nodes.length; j++) {
                if(nodes[j].layer === nodes[i].layer + 1) {
                    connections.push({
                        start: nodes[i],
                        end: nodes[j],
                        pulse: Math.random() // ç”¨äºä¼ è¾“æ•°æ®çš„åŠ¨ç”»
                    });
                }
            }
        }
    }

    // --- 4. æ¸¸æˆå¾ªç¯ ---
    function loop() {
        if (!isGameActive) return;
        
        if (!isPaused) {
            // å‡†ç¡®ç‡è‡ªç„¶è¡°å‡ (æ¨¡æ‹Ÿæ¨¡å‹è€åŒ–/æ•°æ®æ¼‚ç§»)
            // éšç€åˆ†æ•°è¶Šé«˜ï¼Œè¡°å‡è¶Šå¿«ï¼ˆéš¾åº¦å¢åŠ ï¼‰
            let currentDecay = decayRate + (score * 0.005);
            accuracy -= currentDecay;
            
            if(accuracy > 100) accuracy = 100;
            if (accuracy <= 0) {
                endGame();
            }
        }

        // æ›´æ–°UI
        accDisplay.innerText = accuracy.toFixed(2);
        scoreDisplay.innerText = score;

        // çŠ¶æ€æ–‡å­—é¢œè‰²å˜åŒ–
        if(accuracy > 80) {
            accDisplay.style.color = "#00ff00";
            statusText.innerText = "è¿è¡Œå¹³ç¨³";
            statusText.style.color = "#00ff00";
        } else if (accuracy > 50) {
            accDisplay.style.color = "yellow";
            statusText.innerText = "éœ€è¦ç»´æŠ¤";
            statusText.style.color = "yellow";
        } else {
            accDisplay.style.color = "red";
            statusText.innerText = "CRITICAL WARNING";
            statusText.style.color = "red";
        }

        drawNetwork();
        requestAnimationFrame(loop);
    }

    // --- 5. ç»˜å›¾é€»è¾‘ ---
    function drawNetwork() {
        // æ¸…ç©ºèƒŒæ™¯
        ctx.fillStyle = "rgba(0, 0, 0, 0.2)"; // æ‹–å½±æ•ˆæœ
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // ç»˜åˆ¶è¿çº¿
        ctx.lineWidth = 1;
        connections.forEach(conn => {
            conn.pulse += 0.05; // ç§»åŠ¨é€Ÿåº¦
            if(conn.pulse > 1) conn.pulse = 0;

            // åŸºç¡€çº¿
            ctx.strokeStyle = accuracy > 50 ? "#003300" : "#330000";
            ctx.beginPath();
            ctx.moveTo(conn.start.x, conn.start.y);
            ctx.lineTo(conn.end.x, conn.end.y);
            ctx.stroke();

            // æ•°æ®åŒ…åŠ¨ç”» (ä¸€ä¸ªå°ç™½ç‚¹é¡ºç€çº¿è·‘)
            let dx = conn.end.x - conn.start.x;
            let dy = conn.end.y - conn.start.y;
            let px = conn.start.x + dx * conn.pulse;
            let py = conn.start.y + dy * conn.pulse;

            ctx.fillStyle = accuracy > 50 ? "#00ff00" : "#ff0000";
            ctx.beginPath();
            ctx.arc(px, py, 2, 0, Math.PI*2);
            ctx.fill();
        });

        // ç»˜åˆ¶èŠ‚ç‚¹
        nodes.forEach(node => {
            ctx.beginPath();
            ctx.arc(node.x, node.y, 6, 0, Math.PI * 2);
            ctx.fillStyle = accuracy > 50 ? "#00aa00" : "#aa0000";
            ctx.fill();
            ctx.strokeStyle = "#fff";
            ctx.stroke();
        });
    }

    // --- 6. äº¤äº’é€»è¾‘ (é—®ç­”) ---
    function openQuestion() {
        if(!isGameActive) return;
        isPaused = true; // æš‚åœæ¸¸æˆï¼Œè®©ç©å®¶æ€è€ƒ
        
        // éšæœºå–é¢˜
        const randomIndex = Math.floor(Math.random() * questions.length);
        const qData = questions[randomIndex];

        qText.innerText = qData.q;
        qOptions.innerHTML = "";

        qData.options.forEach((opt, index) => {
            const btn = document.createElement('div');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(index, qData.ans);
            qOptions.appendChild(btn);
        });

        modal.style.display = "flex";
    }

    function checkAnswer(selected, correct) {
        modal.style.display = "none";
        isPaused = false; // æ¢å¤æ¸¸æˆ

        if (selected === correct) {
            // ç­”å¯¹äº†
            accuracy += 15; // è¡¥è¡€
            score++;
            statusText.innerText = "æ¨¡å‹ä¼˜åŒ–æˆåŠŸï¼";
            // ç®€å•çš„è§†è§‰åé¦ˆ
            document.body.style.backgroundColor = "#002200";
            setTimeout(() => document.body.style.backgroundColor = "#050505", 200);
        } else {
            // ç­”é”™äº†
            accuracy -= 15; // æ‰£è¡€
            statusText.innerText = "å¼•å…¥äº†BUGï¼";
            document.body.style.backgroundColor = "#330000";
            setTimeout(() => document.body.style.backgroundColor = "#050505", 200);
        }
    }

    function endGame() {
        isGameActive = false;
        finalScore.innerText = score;
        gameOverScreen.style.display = "flex";
        document.querySelector('.hud').style.display = 'none';
    }

    // å¯åŠ¨
    initNetwork();
    loop();

</script>
</body>
</html>